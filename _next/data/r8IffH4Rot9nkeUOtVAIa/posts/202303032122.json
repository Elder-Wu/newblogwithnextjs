{"pageProps":{"postDetail":{"id":"202303032122","contentHtml":"<h2>在 pages 目录中应该只包含 Next.js 页面组件，这些页面组件应该是应用程序的顶级路由组件，而不是嵌套在其他组件中的子组件。这是因为 pages 目录下的文件仅仅用于配置 Next.js 应用程序的路由，因此它们不应该包含业务逻辑或其他功能</h2>\n<h2>不在pages文件夹下的组件，会被视为服务端(SSR)渲染组件</h2>\n<h2>next/dynamic 动态加载   --->  动态加载只对客户端才有意义</h2>\n<h1>预渲染和数据获取</h1>\n<p>Essentially, <code>getStaticProps</code> allows you to tell Next.js: “Hey, this page has some data dependencies — so when you pre-render this page at build time, make sure to resolve them first!”</p>\n<pre><code>export default function Home(props) { ... }\n\nexport async function getStaticProps() {\n  // Get external data from the file system, API, DB, etc.\n  const data = ...\n\n  // The value of the `props` key will be\n  //  passed to the `Home` component\n  return {\n    props: ...\n  }\n}\n</code></pre>\n<h1><a href=\"https://www.nextjs.cn/docs/api-reference/next.config.js/exportPathMap\">exportPathMap</a></h1>\n<p><code>exportPathMap</code> allows you to specify a mapping of request paths to page destinations</p>\n<pre><code>module.exports = {\n  exportPathMap: async function (\n    defaultPathMap,\n    { dev, dir, outDir, distDir, buildId }\n  ) {\n    return {\n      '/': { page: '/' },\n      '/about': { page: '/about' },\n      '/p/hello-nextjs': { page: '/post', query: { title: 'hello-nextjs' } },\n      '/p/learn-nextjs': { page: '/post', query: { title: 'learn-nextjs' } },\n      '/p/deploy-nextjs': { page: '/post', query: { title: 'deploy-nextjs' } },\n    }\n  },\n}\n</code></pre>\n<p><em><strong>Note: the <code>query</code> field in <code>exportPathMap</code> cannot be used with <code>automatically statically optimized pages</code> or <code>getStaticProps</code> pages as they are rendered to HTML files at build-time and additional query information cannot be provided during <code>next export</code></strong></em></p>\n<h2>参数</h2>\n<p><code>exportPathMap</code> is an async function that receives 2 arguments: the first one is <code>defaultPathMap</code>, which is the default map used by Next.js. The second argument is an object with:</p>\n<ul>\n<li><code>dev</code> <code>true</code> when exportPathMap is being called in development. <code>false</code> when running next export. In development exportPathMap is used to define routes</li>\n<li><code>dir</code> Absolute path to the project directory</li>\n<li><code>outdir</code> Absolute path to the out/ directory (configurable with -o). When dev is true the value of outDir will be null.\n<pre><code># 指定输出文件夹\nnext export -o outdir\n</code></pre>\n</li>\n<li><code>distdir</code> Absolute path to the .next/ directory (configurable with the distDir config)</li>\n<li><code>buildId</code> The generated build id</li>\n</ul>\n<h1>返回值</h1>\n<p>The returned object is a map of pages where the key is the pathname and the value is an object that accepts the following fields:</p>\n<ul>\n<li><code>page:String</code> the page inside the pages directory to rende</li>\n<li><code>query:Object</code> query的值取决于你的页面配置\n<pre><code>// 有个动态页面/a/b/c/[id]，用户访问\"/\"时，你希望展示/a/b/c/index\"页面，可以这样配置\nreturn {\n  \"/\":{page:\"/a/b/c\",query:{slug:\"index\"}}\n}\n</code></pre>\n</li>\n</ul>\n","title":"Next-js笔记","date":"2023-03-03 21:22:02","cover":null,"category":[]}},"__N_SSG":true}